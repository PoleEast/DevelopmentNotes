# 技術決策軌跡記錄 - Vue條件渲染狀態保持策略

`2025-08-11`

## 問題/需求

實現雙畫面切換功能，其中第二個畫面需要延遲渲染但渲染後保持狀態，第一個畫面也需要在切換後保持狀態。因為畫面中有需要請求的icon與圖片資料所以希望保留的同時減少初始載入的負擔。

## 考慮方案

### 方案一：純 v-if 條件渲染

- **優點**：簡潔直觀，未渲染組件不佔用記憶體
- **缺點**：每次切換都會重新渲染，狀態無法保持

### 方案二：純 v-show 顯示控制

- **優點**：所有組件同時渲染，狀態天然保持
- **缺點**：無法實現延遲渲染需求，初始載入負擔重

### 方案三：混合策略（v-if + v-show）

- **做法**：使用 v-if 控制初次渲染時機，v-show 控制後續顯示
- **優點**：兼顧延遲渲染與狀態保持
- **缺點**：需要額外的狀態管理邏輯

## 最終選擇

**方案三**：v-if + v-show 混合策略

### 選擇理由

1. **滿足延遲渲染需求**：第二個畫面在首次需要時才渲染
2. **實現狀態保持**：渲染後使用 v-show 控制，避免重新渲染
3. **性能優化**：平衡初始載入性能與運行時體驗

## 排除方案

### 排除方案一

- **原因**：無法滿足狀態保持的核心需求

### 排除方案二

- **原因**：不符合延遲渲染的性能考量

## 備註

此決策重點在於通過狀態管理來控制渲染時機，適用於需要平衡初始性能與用戶體驗的場景。未來如果狀態管理複雜度增加，可考慮使用 keep-alive 或狀態持久化方案。